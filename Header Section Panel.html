<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>MicroSiteKit ‚Äì Header Section Panel</title>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />

    <!-- Custom Styles -->
    <link href="Assets/css/style.css" rel="stylesheet" />

    <!-- Mermaid Setup -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <script type="module">
        import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs";
        mermaid.initialize({ startOnLoad: false });
        window.mermaid = mermaid;
    </script>
</head>

<body class="glass">
    <!-- Injected Partials -->
    <div id="shared-header"></div>
    <div id="main-nav"></div>
    <div id="sidebar-nav"></div>

    <!-- Page-Specific Content -->
    <div class="container">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb" id="breadcrumb"></ol>
        </nav>
        <div class="row">
            <div class="col-md-4 gradient-col d-flex align-items-center justify-content-center">
                <h3 class="gradient-text">Header Section Panel</h3>
            </div>
            <div class="col-md-8">
                <div class="page-intro text-center py-4 px-3">
                    <!-- Replace this block with your page-specific content -->
                    <p>This header scaffold anchors your microsite with expressive branding, intuitive navigation, and
                        contributor-first clarity. It includes a responsive menu toggle, site title, logo cluster, and a
                        hero
                        banner
                        with overlay text.</p>

                    <ul>
                        <li>üß≠ Great for microsite homepages, dashboards, and landing pages</li>
                        <li>üß± Modular and responsive‚Äîuses Bootstrap flex utilities and offcanvas toggles</li>
                        <li>üé® Theme-safe and layout-friendly‚Äîharmonises with branding</li>
                        <li>üñºÔ∏è Includes hero banner with overlay text for trust identity</li>
                        <li>üßº Keeps structure clean, scannable, and contributor-first</li>
                    </ul>

                    <p>Use it to say ‚ÄúWelcome to the Learning Hub,‚Äù ‚ÄúExplore your training tools,‚Äù or ‚ÄúLaunch your
                        onboarding
                        journey‚Äù‚Äîwhatever sparks clarity and modular joy.</p>
                </div>
            </div>

            <!-- Page full width content -->
            <div class="row mt-4">
                <div class="col-md border border-primary rounded p-3">
                    <section class="playground mt-5">
                        <h3>üß© Header Playground</h3>

                        <form id="headerOptions" class="mb-3">
                            <!-- Toggles -->
                            <h5>Toggle Elements</h5>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showMenuBtn"
                                    checked><label class="form-check-label" for="showMenuBtn">Show Menu Button</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showTitle"
                                    checked><label class="form-check-label" for="showTitle">Show Site Title</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showLogos"
                                    checked><label class="form-check-label" for="showLogos">Show Logos</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showBanner"
                                    checked><label class="form-check-label" for="showBanner">Show Hero Banner</label>
                            </div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showToolbar"
                                    checked><label class="form-check-label" for="showToolbar">Show Toolbar (theme, text
                                    size, dark mode, search)</label></div>
                            <div class="form-check"><input class="form-check-input" type="checkbox" id="showSidebar"
                                    checked><label class="form-check-label" for="showSidebar">Show Sidebar</label></div>

                            <!-- Editable fields -->
                            <h5 class="mt-3">Editable Content</h5>
                            <div class="mb-2">
                                <label class="form-label">Site Title</label>
                                <input type="text" id="siteTitle" class="form-control" value="MicroSiteKit">
                            </div>
                            <div class="mb-2">
                                <label class="form-label">Banner Text</label>
                                <input type="text" id="bannerText" class="form-control" value="Microsite Services">
                            </div>
                            <div class="mb-2">
                                <label class="form-label">Logo 1 URL</label>
                                <input type="text" id="logo1" class="form-control" value="Assets/Images/Logo1.png">
                            </div>
                            <div class="mb-2">
                                <label class="form-label">Logo 2 URL</label>
                                <input type="text" id="logo2" class="form-control" value="Assets/Images/Logo2.png">
                            </div>
                            <div class="mb-2">
                                <label class="form-label">Banner Image URL</label>
                                <input type="text" id="bannerImg" class="form-control" value="Assets/Images/Banner.png">
                            </div>
                        </form>


                        <div class="row mt-4">
                            <div class="mb-3">
                                <div class="dohicky-grid">
                                    <div class="dohicky-item"><button type="button" id="generateBtn"
                                            class="btn btn-primary w-100">Generate Code</button></div>
                                    <div class="dohicky-item"><button type="button" class="btn btn-primary w-100"
                                            onclick="copyCode()">Copy</button></div>
                                    <div class="dohicky-item"><button type="button" class="btn btn-primary w-100"
                                            onclick="exportConfig()">üíæ Save Settings</button></div>
                                    <div class="dohicky-item"> <input type="file" id="configFile" accept=".txt"
                                            style="display:none" /> <button type="button" class="btn btn-primary w-100"
                                            onclick="document.getElementById('configFile').click()">üìÇ Load
                                            Settings</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Generated code first -->
                            <div class="border border-primary rounded p-3 mb-3">
                                <h5>Generated Code</h5>
                                <pre><code id="output"></code></pre>
                            </div>

                            <!-- Then preview on a new line -->
                            <div class="border border-primary rounded p-3">
                                <h5>Live Preview</h5>
                                <div id="previewArea"></div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div id="shared-footer"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.min.js"></script>
    <!-- Custom JS -->
    <script src="Assets/js/script.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const outputEl = document.getElementById("output");
            const previewEl = document.getElementById("previewArea");

            document.getElementById("generateBtn").onclick = () => {
                const opts = {
                    showMenuBtn: document.getElementById("showMenuBtn").checked,
                    showTitle: document.getElementById("showTitle").checked,
                    showLogos: document.getElementById("showLogos").checked,
                    showBanner: document.getElementById("showBanner").checked,
                    showToolbar: document.getElementById("showToolbar").checked,
                    showSidebar: document.getElementById("showSidebar").checked,
                    siteTitle: document.getElementById("siteTitle").value,
                    bannerText: document.getElementById("bannerText").value,
                    logo1: document.getElementById("logo1").value,
                    logo2: document.getElementById("logo2").value,
                    bannerImg: document.getElementById("bannerImg").value
                };

                // Build HTML string
                let html = `<header class="nhs-header">\n  <div class="header-bar d-flex align-items-center justify-content-between px-3 py-2 position-relative">\n`;

                if (opts.showMenuBtn) {
                    html += `    <div class="menu-button-wrapper">\n      <button class="btn btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">‚ò∞ Menu</button>\n    </div>\n`;
                }
                if (opts.showTitle) {
                    html += `    <div class="center-heading text-center flex-grow-1"><h1 class="mb-0">${opts.siteTitle}</h1></div>\n`;
                }
                if (opts.showLogos) {
                    html += `    <div class="logo-container d-flex align-items-center gap-2">\n      <img src="${opts.logo1}" alt="Logo 1" class="logo esr"/>\n      <img src="${opts.logo2}" alt="Logo 2" class="logo nhs"/>\n    </div>\n`;
                }
                html += `  </div>\n`;

                if (opts.showBanner) {
                    html += `  <div class="banner-wrapper text-center position-relative">\n    <img src="${opts.bannerImg}" alt="Banner" class="Banner_image w-100"/>\n    <div class="banner-text-overlay"><h1>${opts.bannerText}</h1></div>\n  </div>\n`;
                }

                if (opts.showToolbar) {
                    html += `  <div id="desktop-nav-toolbar">\n    <nav class="navbar navbar-expand-lg mt-3">\n      <div class="container flex-column">\n        <div class="d-flex w-100 justify-content-between align-items-center">\n          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">\n            <span class="navbar-toggler-icon"></span>\n          </button>\n          <div class="collapse navbar-collapse" id="navMenu">\n            <ul id="main-nav" class="navbar-nav mx-auto"></ul>\n          </div>\n        </div>\n        <div class="d-flex justify-content-center mt-2">\n          <div class="control-toolbar d-flex flex-wrap gap-2 p-2 rounded justify-content-center w-100 mt-2">\n            <!-- Theme selector, text size, dark mode, search -->\n          </div>\n        </div>\n      </div>\n    </nav>\n  </div>\n`;
                }

                html += `</header>\n`;

                if (opts.showSidebar) {
                    html += `<div class="offcanvas offcanvas-start sidebar theme-bg" id="sidebarMenu">\n  <div class="offcanvas-header"><h5>${opts.siteTitle}</h5></div>\n  <div class="offcanvas-body"><ul id="sidebar-nav" class="nav navbar-nav flex-column"></ul></div>\n</div>\n`;
                }

                outputEl.textContent = html;
                previewEl.innerHTML = html;
            };
        });

        function sanitizeSmartCharacters(str) {
            return str
                .replace(/[\u2018\u2019\u201A\u201B\u2032\u2035]/g, "'") // single quotes
                .replace(/[\u201C\u201D\u201E\u201F\u2033\u2036]/g, '"') // double quotes
                .replace(/[\u2013]/g, '-') // en dash
                .replace(/[\u2014]/g, '--') // em dash
                .replace(/\u00A0/g, ' ') // non-breaking space
                .replace(/\u2026/g, '...') // ellipsis
                .replace(/\u200B/g, '') // zero-width space
                .replace(/\uFEFF/g, ''); // BOM
        }

        function copyCode() {
            const rawText = document.getElementById("output").textContent;
            const cleanText = sanitizeSmartCharacters(rawText);
            navigator.clipboard.writeText(cleanText);
            alert("Code copied (smart characters cleaned)!");
        }
    </script>
</body>

</html>